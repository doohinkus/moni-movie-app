
  <script>
  const companies = [];
  {% for company in companies %}
    companies.push("{{ companies[company] }}");
  {% endfor %}
  </script>

{% for movie in movies.results %}
  <div class="row mt-3">
    <div class="col-md-4 text-center">
      {% if movie.poster_path != None %}
        <img src="http://image.tmdb.org/t/p/w185/{{ movie.poster_path }}" />
        {% else %}
        ðŸ˜­ ðŸ˜­ ðŸ˜­
        <p class="text-danger">no image available</p>
      {% endif %}
    </div>
    <div class="col-md-8 d-flex align-items-center flex-column">
      <h2>{{ movie.title }} ({{ movie.release_date[:4] }})</h2>
      <div id="company-{{ movie.id }}">
      </div>
      <p>{{ movie.overview }}</p>
      <!-- <p><a href="{{ url_for('details', movieID=movie.id) }}">{{ movie.id }}</a></p> -->
      {% compress 'js' %}
      <script>
      fetch('/details/{{ movie.id }}')
        .then(function(res){
          return res.json();
        })
        .then(function(myJson){
          myJson.production_companies.forEach(company => {
             console.log(company.id, companies.indexOf(company.id.toString()))
             const style = companies.indexOf(company.id.toString()) != -1 ? "text-success font-weight-bold text-center ml-1" : " ml-1 text-center text-secondary";
            $('#company-{{ movie.id }}').append(` <span class="${style}"> ${company.name} </span> `);
          });
        })
      </script>
      <script type="text/javascript" src="/static/js.js"></script>
      {% endcompress %}
    </div>
  </div>
{% endfor %}
